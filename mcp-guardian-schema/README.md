# MCP Guardian Schema

A dedicated Rust package for generating JSON Schema from the MCP Guardian core library types.

## Setup and Installation

This package is part of the MCP Guardian workspace. After cloning the repository:

1. Ensure you have a Rust toolchain installed
2. Add `schemars` to dependencies in the core library
3. Add `JsonSchema` derive to core types 
4. Build the schema package with `cargo build`

## Features

- Generate JSON schemas for core entity types (GuardProfile, McpServer, ServerCollection)
- Export schemas to files for use in frontend validation
- Generate documentation from schemas
- Schema version management
- Validation utilities

## Usage

### Library Usage

```rust
use mcp_guardian_schema::{
    generate_guard_profile_schema,
    generate_mcp_server_schema,
    generate_server_collection_schema,
    export_schemas_to_directory,
};
use std::path::Path;

// Generate JSON Schema for a specific entity type
let guard_profile_schema = generate_guard_profile_schema()?;
println!("{}", guard_profile_schema);

// Export all schemas to a directory
export_schemas_to_directory(Path::new("./schemas"))?;
```

### Command Line Usage

```bash
# Navigate to the schema package
cd mcp-guardian-schema

# Export all schemas to a directory
cargo run -- export --dir ./schemas

# Generate a specific schema
cargo run -- generate --type guard-profile

# Generate schema documentation
cargo run -- docs --output ./schema-docs.md

# Validate a configuration file against its schema (future implementation)
cargo run -- validate --type guard-profile --file ./my-profile.json
```

### Justfile Commands

For convenience, a Justfile is provided with common operations:

```bash
# Display available commands
just --list

# Generate all schemas
just generate

# Generate specific schemas
just generate-mcp-server
just generate-guard-profile
just generate-server-collection

# Export schemas to the frontend
just export-to-frontend

# Clean up
just clean
```

## Integration with Frontend

The schemas generated by this package are used in the MCP Guardian frontend with Monaco Editor to provide:

1. Validation: Immediate feedback on JSON configuration errors
2. Autocompletion: Intelligent suggestions for property names
3. Documentation: Inline help text from schema descriptions
4. Type Checking: Verification of value types and formats

## Build Process Integration

During the build process:

1. The schema generation is run to create the latest schema files
2. The generated schemas are placed in the frontend's schema directory
3. Monaco Editor is configured to use these schemas for validation

## Extending the Schema System

To add a new entity type to the schema system:

1. Add the `schemars::JsonSchema` derive to the Rust type in `mcp-guardian-core`
2. Create a new schema generation module in this package
3. Add export functions to the main API
4. Update the CLI to include the new schema type